# 🛡️ 코드 무결성 검수 가이드 (Code Integrity Inspection Guide)

프로젝트의 코드 무결성을 테스트하고 잠재적인 오류, 중복, 누락을 색출하기 위한 체계적인 방법론과 규칙입니다.

---

## 1. 👻 사령(Dead Code) & 유령(Ghost) 탐지

죽은 코드는 혼란을 주고 유지보수를 방해합니다.

### 🔍 검출 규칙
1.  **주석 처리된 코드 덩어리 (Zombie Block)**: 과거 로직을 지우지 않고 주석으로만 남겨둔 경우.
2.  **유령 파일**: 아무 내용이 없거나 주석만 있는 파일.
3.  **유령 코멘트**: "삭제됨(Removed)"이라고 써놓고 실제 코드가 남아있거나, 코드만 지우고 주석을 남긴 경우.
4.  **미사용 변수/함수**: 선언만 하고 호출하지 않는 심볼.

### 🛠️ 탐지 패턴 (Regex)
- `//.*(?:\n\s*//.*)+` (여러 줄 주석 블록)
- `TODO|FIXME|XXX` (방치된 작업)
- `\/\*\s*[\s\S]*?\*\/` (블록 주석)
- `//.*removed|//.*deleted` (삭제 흔적)

---

## 2. 🥷 스텔스 구조 위반 (Stealth Structure Violations)

린터(Linter)가 잡아내기 어려운, **문자열 안에 숨은 위반 사항**들입니다.

### 🔍 검출 규칙
1.  **템플릿 문자열 내 인라인 스타일**: JavaScipt `innerHTML` 백틱(`` ` ``) 안에 숨은 `style="..."`.
2.  **템플릿 문자열 내 인라인 핸들러**: 백틱 안에 숨은 `onclick="..."`.
3.  **중복 ID 생성**: 반복문(forEach, map) 내에서 고정된 ID를 사용하여 `id` 중복을 유발하는 경우.

### 🛠️ 탐지 패턴 (Regex)
- `style=['"]` (JS 파일 내 검색)
- `on\w+=["']` (JS/HTML 파일 내 검색)
- `id=["'][^$]+["']` (반복문 내부에서 고정 문자열 ID 사용 의심)

---

## 3. 👯 중복 및 리던던시 (Redundancy)

"단일 진실 공급원(Single Source of Truth)" 원칙 위반입니다.

### 🔍 검출 규칙
1.  **매직 넘버/스트링 (Magic Numbers)**: `768`, `500`, `#ff0000` 같은 값이 여러 곳에 하드코딩된 경우. → `Config`로 이동.
2.  **중복 DOM 쿼리**: `document.getElementById('modal')`을 매 함수마다 호출하는 경우. → 캐싱 필요.
3.  **유사 CSS 블록**: 속성 한두 개만 다르고 나머지가 똑같은 CSS 클래스들. → 공통 클래스로 추출.
4.  **중복 로직**: 같은 계산 공식이나 API 호출 패턴이 여러 파일에 복사+붙여넣기 된 경우.

### 🛠️ 탐지 패턴 (Regex)
- `document\.querySelector|getElementById` (호출 빈도 분석)
- `['"]#[a-f0-9]{3,6}['"]` (하드코딩된 색상 코드)
- `\d+px` (하드코딩된 픽셀 값)

---

## 4. 🕳️ 누락 및 방어 코드 부재 (Omissions)

코드가 "행복한 경로(Happy Path)"만 가정할 때 발생합니다.

### 🔍 검출 규칙
1.  **Null 체크 누락**: `element`가 없을 수 있음에도 `element.classList`를 바로 접근하는 경우. (`?.` 옵셔널 체이닝 필수)
2.  **비동기 에러 핸들링 누락**: `await`를 쓰면서 `try/catch`가 없는 경우.
3.  **이벤트 해제 누락**: `addEventListener`만 있고 `removeEventListener`가 없어 메모리 누수를 유발하는 경우 (SPA 환경).

### 🛠️ 탐지 패턴 (Regex)
- `document\.getElementById\(['"]\w+['"]\)\.` (옵셔널 체이닝 `?.` 없는 직접 접근)
- `async.*\{(?!.*try)` (try 없는 비동기 함수 - 정밀도 낮음)

---

## 🧪 실전 검수 체크리스트 (순서대로 실행)

1.  **Dead Code 청소**:
    - [ ] `//`로 주석 처리된 실행 코드가 있는가?
    - [ ] 내용 없는 파일이 있는가?
2.  **구조 스캔 (CSS/HTML)**:
    - [ ] HTML/JS에 `style="..."`이 있는가?
    - [ ] HTML/JS에 `onclick="..."`이 있는가?
    - [ ] CSS에 `!important`가 있는가?
3.  **중복 스캔 (JS)**:
    - [ ] `Config`에 있어야 할 숫자가 코드에 박혀있는가?
    - [ ] 같은 DOM 요소를 반복해서 찾고 있는가?
4.  **안전성 스캔**:
    - [ ] `null`이 될 수 있는 요소에 안전 연산자(`?.`)를 썼는가?
    - [ ] API 호출 실패 시 대처(catch)가 되어 있는가?
